import{a as J}from"./chunk-QKJQHMTS.js";import{b as R,d as W,g as Z,k as H,l as U,m as q,p as Y}from"./chunk-ZLCATDXL.js";import{a as G}from"./chunk-KAETFBQ2.js";import{a as L}from"./chunk-KQYNL3Z4.js";import{g as V,k as B}from"./chunk-FPE6HGOE.js";import{Fa as g,Ka as w,Oa as _,Qb as D,Rb as F,Sb as E,Ub as N,Va as p,Vb as A,Wa as i,Wb as z,X as x,Xa as o,Y as P,Ya as k,_b as y,ab as v,bb as d,cb as u,jb as s,kb as f,lb as M,mb as I,ob as O,pa as S,pb as b,qb as j,rb as T,tb as C,vb as h,xa as r}from"./chunk-5TTR76IQ.js";function Q(l,t){if(l&1){let e=v();i(0,"label")(1,"input",18),d("change",function(c){x(e);let a=u(2);return P(a.onStatusChange(c))}),o(),i(2,"span",19),s(3),o()()}if(l&2){let e=t.$implicit,n=u(2);r(),p("value",e),r(),p("ngClass",n.statusClassMap[e]),r(),f(e)}}function X(l,t){if(l&1&&(i(0,"div",15)(1,"div",16),_(2,Q,4,3,"label",17),o()()),l&2){let e=u();r(2),p("ngForOf",e.statuses)}}function $(l,t){if(l&1){let e=v();i(0,"div",20),d("click",function(){let c=x(e).$implicit,a=u();return P(a.openProject(c.id))}),i(1,"div",21)(2,"h3",22),s(3),o(),i(4,"span",23),s(5),o()(),i(6,"p",24),s(7),o(),i(8,"div",25)(9,"div"),s(10),C(11,"date"),C(12,"date"),o(),i(13,"div"),s(14),o()(),i(15,"div",26),s(16),C(17,"number"),o()()}if(l&2){let e=t.$implicit,n=t.index;r(2),p("title",T(e.title)),r(),f(e.title),r(),p("ngClass",e.statusClass),r(),M(" ",e.status," "),r(2),f(e.desc),r(3),I("\u{1F4C5} ",h(11,10,e.start,"dd/MM/yy")," - ",h(12,13,e.end,"dd/MM/yy")),r(4),M("\u{1F4DD} ",e.taskCount||0," tasks"),r(2),f(h(17,16,n+1,"2.0"))}}var K=class l{constructor(t,e,n,c,a){this.router=t;this.platformId=e;this.taskService=n;this.notificationService=c;this.authService=a}showFilters=!1;projects=[];filteredProjects=[];searchTerm="";sortOption="Name A\u2013Z";selectedStatuses=[];statuses=["Planning","In Progress","Completed","On Hold","Overdue"];statusClassMap={Planning:"planning","In Progress":"in-progress",Completed:"completed","On Hold":"on-hold",Overdue:"overdue"};ngOnInit(){if(y(this.platformId)&&!this.authService.currentUserValue){this.router.navigate(["/login"]);return}y(this.platformId)&&this.taskService.projects$.subscribe(t=>{this.projects=t,this.updateProjectStatuses(),this.applyFilters()})}toggleFilters(){this.showFilters=!this.showFilters}onStatusChange(t){let e=t.target.value;t.target.checked?this.selectedStatuses.includes(e)||this.selectedStatuses.push(e):this.selectedStatuses=this.selectedStatuses.filter(n=>n!==e),this.applyFilters()}applyFilters(){let t=this.projects.filter(e=>e.title.toLowerCase().includes(this.searchTerm.toLowerCase()));this.selectedStatuses.length&&(t=t.filter(e=>this.selectedStatuses.includes(e.status))),this.sortOption==="Name A\u2013Z"?t.sort((e,n)=>e.title.localeCompare(n.title)):t.sort((e,n)=>n.title.localeCompare(e.title)),this.filteredProjects=t}goToCreateProject(){this.router.navigate(["/projects/create"])}updateProjectStatuses(){this.projects.forEach(t=>{let e=t.tasks||[],n=e.length,c=e.filter(m=>m.status==="Done").length,a=e.filter(m=>m.dueDate&&new Date(m.dueDate)<new Date&&m.status!=="Done").length;n===0?(t.status="Planning",t.statusClass="planning"):c===n?(t.status="Completed",t.statusClass="completed"):a>0?(t.status="Overdue",t.statusClass="overdue"):(t.status="In Progress",t.statusClass="in-progress"),t.taskCount=n})}openProject(t){this.router.navigate(["/projects",t])}static \u0275fac=function(e){return new(e||l)(g(V),g(S),g(G),g(J),g(L))};static \u0275cmp=w({type:l,selectors:[["app-projects"]],decls:31,vars:4,consts:[[1,"projects-page"],[1,"top-bar"],[1,"left"],[1,"create-btn",3,"click"],[1,"controls"],[1,"search-box"],["type","text","placeholder","Search projects by name...",3,"ngModelChange","input","ngModel"],[1,"right-controls"],[3,"ngModelChange","change","ngModel"],[1,"filter-btn",3,"click"],["src","/icons/filters.png","alt","filter"],["class","filter-panel",4,"ngIf"],[1,"project-list"],["class","project-card",3,"click",4,"ngFor","ngForOf"],[1,"connect"],[1,"filter-panel"],[1,"status-options"],[4,"ngFor","ngForOf"],["type","checkbox",3,"change","value"],[1,"pill",3,"ngClass"],[1,"project-card",3,"click"],[1,"project-header"],[3,"title"],[1,"status-pill",3,"ngClass"],[1,"desc"],[1,"meta"],[1,"index"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),s(4,"Projects"),o(),i(5,"p"),s(6,"Manage your projects and tasks"),o()(),i(7,"button",3),d("click",function(){return n.goToCreateProject()}),s(8," Create New Project "),o()(),i(9,"div",4)(10,"div",5)(11,"input",6),j("ngModelChange",function(a){return b(n.searchTerm,a)||(n.searchTerm=a),a}),d("input",function(){return n.applyFilters()}),o()(),i(12,"div",7)(13,"select",8),j("ngModelChange",function(a){return b(n.sortOption,a)||(n.sortOption=a),a}),d("change",function(){return n.applyFilters()}),i(14,"option"),s(15,"Name A\u2013Z"),o(),i(16,"option"),s(17,"Name Z\u2013A"),o()(),i(18,"button",9),d("click",function(){return n.toggleFilters()}),k(19,"img",10),s(20," Filter "),o()()(),_(21,X,3,1,"div",11),i(22,"div",12),_(23,$,18,19,"div",13),o(),i(24,"div",14)(25,"h2"),s(26,"Connect with us"),o(),i(27,"p"),s(28,"Raise a ticket for any query."),o(),i(29,"button"),s(30,"Learn More \u2192"),o()()()),e&2&&(r(11),O("ngModel",n.searchTerm),r(2),O("ngModel",n.sortOption),r(8),p("ngIf",n.showFilters),r(2),p("ngForOf",n.filteredProjects))},dependencies:[z,D,F,E,Y,U,q,R,H,W,Z,B,A,N],styles:[".projects-page[_ngcontent-%COMP%]{padding:40px 60px;font-family:Segoe UI,sans-serif;background:#fff}.top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.top-bar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:42px;margin:0;font-weight:700}.top-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin-top:6px}.top-bar[_ngcontent-%COMP%]   .create-btn[_ngcontent-%COMP%]{background:#d9edbf;padding:12px 26px;border-radius:999px;border:none;font-weight:600;cursor:pointer}.controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:28px 0;gap:20px}.search-box[_ngcontent-%COMP%]{flex:1}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:16px 20px;border-radius:16px;border:none;background:#f3f4f6;font-size:15px;outline:none}.right-controls[_ngcontent-%COMP%]{display:flex;gap:14px;align-items:center}.right-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .right-controls[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]{padding:14px 20px;border-radius:14px;border:1px solid #e5e7eb;background:#fff;font-weight:500;cursor:pointer}.right-controls[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.right-controls[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;height:18px}.filter-panel[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;font-weight:600;color:#444;margin-bottom:12px}.filter-title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:12px}.status-options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;color:#fff}.status-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:16px;height:16px;accent-color:#4b5320}.planning[_ngcontent-%COMP%]{background:#bb29bb;color:#fff}.in-progress[_ngcontent-%COMP%]{background:#008ad8;color:#fff}.completed[_ngcontent-%COMP%]{background:#00cc4e;color:#fff}.overdue[_ngcontent-%COMP%]{background:#b91c1c;color:#fff}.status-pill[_ngcontent-%COMP%], .pill[_ngcontent-%COMP%]{padding:6px 14px;border-radius:999px;font-size:12px;font-weight:600;white-space:nowrap}.project-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:22px}.project-card[_ngcontent-%COMP%]{background:#fff;padding:18px;border-radius:16px;box-shadow:0 10px 26px #0000000f;position:relative;min-height:190px;transition:transform .2s ease}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px;font-weight:700;max-width:160px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.project-card[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{color:#6b7280;font-size:13px;margin-top:8px;min-height:38px}.project-card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:12px;margin-top:10px;display:flex;flex-direction:column;gap:6px}.project-card[_ngcontent-%COMP%]   .index[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:12px;font-size:70px;color:#0000001a;font-weight:400;font-style:italic}.connect[_ngcontent-%COMP%]{text-align:center;margin:100px 0}.connect[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:38px;margin-bottom:12px;font-weight:600}.connect[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280}.connect[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#4b5320;color:#fff;padding:18px 60px;border-radius:999px;border:none;margin-top:28px;font-size:16px;cursor:pointer}"]})};export{K as ProjectsComponent};
