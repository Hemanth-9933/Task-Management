import{b as k,d as D,g as F,p as A}from"./chunk-ZLCATDXL.js";import{a as j}from"./chunk-KQYNL3Z4.js";import{g as T}from"./chunk-FPE6HGOE.js";import{Fa as _,Ka as w,Oa as u,Sb as E,Ub as S,Va as g,Wa as i,Wb as U,X as p,Xa as t,Y as m,Ya as O,_b as V,ab as x,bb as f,cb as d,jb as o,kb as C,ob as b,pa as v,pb as h,qb as P,tb as y,va as M,vb as I,xa as s}from"./chunk-5TTR76IQ.js";function B(r,n){if(r&1){let e=x();i(0,"button",4),f("click",function(){p(e);let a=d();return m(a.toggleEdit())}),o(1,"Edit Profile"),t()}}function W(r,n){if(r&1){let e=x();i(0,"input",12),f("change",function(a){p(e);let c=d(2);return m(c.onFileSelected(a))}),t()}}function R(r,n){if(r&1&&(i(0,"div",13)(1,"div",14)(2,"label"),o(3,"Name"),t(),i(4,"span"),o(5),t()(),i(6,"div",14)(7,"label"),o(8,"Email"),t(),i(9,"span"),o(10),t()(),i(11,"div",14)(12,"label"),o(13,"Account Created"),t(),i(14,"span"),o(15),y(16,"date"),t()()()),r&2){let e=d(2);s(5),C(e.user.username),s(5),C(e.user.email),s(5),C(I(16,3,e.user.createdAt,"MMM d, y, h:mm a"))}}function G(r,n){if(r&1){let e=x();i(0,"div",13)(1,"div",15)(2,"label"),o(3,"Name"),t(),i(4,"input",16),P("ngModelChange",function(a){p(e);let c=d(2);return h(c.editedUser.username,a)||(c.editedUser.username=a),m(a)}),t()(),i(5,"div",15)(6,"label"),o(7,"Email"),t(),i(8,"input",16),P("ngModelChange",function(a){p(e);let c=d(2);return h(c.editedUser.email,a)||(c.editedUser.email=a),m(a)}),t()(),i(9,"div",17)(10,"button",18),f("click",function(){p(e);let a=d(2);return m(a.saveChanges())}),o(11,"Save Changes"),t(),i(12,"button",19),f("click",function(){p(e);let a=d(2);return m(a.toggleEdit())}),o(13,"Cancel"),t()()()}if(r&2){let e=d(2);s(4),b("ngModel",e.editedUser.username),s(4),b("ngModel",e.editedUser.email)}}function J(r,n){if(r&1&&(i(0,"div",5)(1,"h3"),o(2,"Profile Information"),t(),i(3,"p",6),o(4,"View and manage your account details"),t(),i(5,"div",7)(6,"div",8),O(7,"img",9),u(8,W,1,0,"input",10),t(),u(9,R,17,6,"div",11)(10,G,14,2,"div",11),t()()),r&2){let e=d();s(7),g("src",e.user.profilePhoto||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiPjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjUwIiBmaWxsPSIjRDBEMDBEIi8+PC9zdmc+",M),s(),g("ngIf",e.isEditing),s(),g("ngIf",!e.isEditing),s(),g("ngIf",e.isEditing)}}var N=class r{constructor(n,e,l){this.platformId=n;this.authService=e;this.router=l}user;isEditing=!1;editedUser={username:"",email:""};selectedFile=null;ngOnInit(){if(V(this.platformId)&&!this.authService.currentUserValue){this.router.navigate(["/login"]);return}this.user=this.authService.currentUserValue,this.user&&(this.editedUser={username:this.user.username,email:this.user.email})}toggleEdit(){this.isEditing=!this.isEditing}onFileSelected(n){let e=n.target.files[0];if(e){if(e.size>2*1024*1024){alert("File size must be less than 2MB");return}if(!["image/jpeg","image/png","image/gif"].includes(e.type)){alert("Only JPG, PNG, GIF allowed");return}this.selectedFile=e}}saveChanges(){if(this.selectedFile){let n=new FileReader;n.onload=()=>{this.user.profilePhoto=n.result,this.updateUser()},n.readAsDataURL(this.selectedFile)}else this.updateUser()}updateUser(){this.user.username=this.editedUser.username,this.user.email=this.editedUser.email;let n=JSON.parse(localStorage.getItem("users")||"[]"),e=n.findIndex(l=>l.email===this.user.email);e!==-1&&(n[e]=this.user,localStorage.setItem("users",JSON.stringify(n)),localStorage.setItem("currentUser",JSON.stringify(this.user)),this.authService.updateCurrentUser(this.user)),this.isEditing=!1,this.selectedFile=null}static \u0275fac=function(e){return new(e||r)(_(v),_(j),_(T))};static \u0275cmp=w({type:r,selectors:[["app-profile"]],decls:9,vars:2,consts:[[1,"profile-page"],[1,"page-header"],["class","edit-top-btn",3,"click",4,"ngIf"],["class","profile-card",4,"ngIf"],[1,"edit-top-btn",3,"click"],[1,"profile-card"],[1,"subtitle"],[1,"profile-body"],[1,"photo-section"],[1,"profile-img",3,"src"],["type","file","accept","image/*",3,"change",4,"ngIf"],["class","info-section",4,"ngIf"],["type","file","accept","image/*",3,"change"],[1,"info-section"],[1,"info-item"],[1,"form-group"],[3,"ngModelChange","ngModel"],[1,"button-row"],[1,"save-btn",3,"click"],[1,"cancel-btn",3,"click"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),o(4,"My Profile"),t(),i(5,"p"),o(6,"Manage your profile and details"),t()(),u(7,B,2,0,"button",2),t(),u(8,J,11,4,"div",3),t()),e&2&&(s(7),g("ngIf",!l.isEditing),s(),g("ngIf",l.user))},dependencies:[U,E,A,k,D,F,S],styles:[".profile-page[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;padding:30px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:42px;margin:0}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin-top:6px}.edit-top-btn[_ngcontent-%COMP%]{background:#dbeec1;border:none;padding:10px 20px;border-radius:999px;font-weight:600;cursor:pointer}.profile-card[_ngcontent-%COMP%]{background:#fff;padding:30px;border-radius:14px;box-shadow:0 8px 24px #0000000f}.profile-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:6px}.profile-card[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#6b7280;margin-bottom:24px}.profile-body[_ngcontent-%COMP%]{display:flex;gap:40px;align-items:flex-start}.photo-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.photo-section[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:50%;object-fit:cover;border:2px solid #e5e7eb;margin-bottom:10px}.info-section[_ngcontent-%COMP%]{flex:1}.info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{margin-bottom:20px}.info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;display:block;color:#374151;margin-bottom:4px}.info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#111827}.info-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.info-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;display:block;margin-bottom:6px}.info-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:8px;border:1px solid #d1d5db}.button-row[_ngcontent-%COMP%]{display:flex;gap:12px}.button-row[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:#10b981;color:#fff;border:none;padding:10px 18px;border-radius:999px;cursor:pointer}.button-row[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background:#e5e7eb;border:none;padding:10px 18px;border-radius:999px;cursor:pointer}@media(max-width:768px){.profile-body[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}"]})};export{N as ProfileComponent};
