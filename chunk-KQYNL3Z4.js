import{N as c,R as u,_b as m,a as o,b as i,h as a,pa as l}from"./chunk-5TTR76IQ.js";var f=class s{constructor(r){this.platformId=r;if(m(this.platformId)){let e=localStorage.getItem("currentUser");e&&this.currentUserSubject.next(JSON.parse(e))}}currentUserSubject=new a(null);currentUser$=this.currentUserSubject.asObservable();login(r,e){let t=JSON.parse(localStorage.getItem("users")||"[]").find(n=>n.email===r&&n.password===e);return t?(localStorage.setItem("currentUser",JSON.stringify(t)),this.currentUserSubject.next(t),!0):!1}register(r){let e=JSON.parse(localStorage.getItem("users")||"[]");if(e.find(t=>t.email===r.email))throw new Error("User already exists");e.push(i(o({},r),{createdAt:new Date,profilePhoto:null})),localStorage.setItem("users",JSON.stringify(e))}logout(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)}get currentUserValue(){return this.currentUserSubject.value}updateCurrentUser(r){this.currentUserSubject.next(r)}static \u0275fac=function(e){return new(e||s)(u(l))};static \u0275prov=c({token:s,factory:s.\u0275fac,providedIn:"root"})};export{f as a};
